<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../CSS/style.css">
    <script type="text/javascript" src="../JS/user-input.js"></script>
    <script type="text/javascript" src="../JS/user-input.js"></script>
</head>
<body>
    <header>
        <div class="title">
            <h1>Flowdle 2.0</h1>
        </div>
    </header>
    <main>
        <div class="difficulty-container">
            <h2>Select a difficulty</h2>
            <div class="difficulty-buttons">
                <button class="'buttons" onclick=showRows()>Easy</button>
                <button class="'buttons" onclick=showRows()>Hard</button>
                <button class="'buttons" onclick=showRows()>Infinite</button>
            </div>
        </div>

        <div class="words-container">
            <div class="row" id="row1">
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
            </div>
            <div class="row" id="row2">
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
            </div>
            <div class="row" id="row3">
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
            </div>
            <div class="row" id="row4">
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
            </div>
            <div class="row" id="row5">
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
                <div class="letter"></div>
            </div>

            <script>
				//Arrays of words being used for our game
				const words = ["apply","amoks","abuzz","axile","admix","brock","blank","booze","bezil","craze","comfy","crock","cajon","cheek","dixie","decoy","doozy","djinn","detox","evade","extra","envoy","empty","exams","fluff","field","flask","fruit","flair","gauze","genre","glyph","graze","guilt","habit","hoist","hover","hydro","harpy","indie","ivory","ionic","idyll","input","joust","juicy","juror","jokes","jewel","karma","knave","kodak","kanji","kinky","latch","lemon","lured","lymph","lyric","macro","marsh","menus","mixer","mogul","navel","niche","nymph","nexus","nails","olden","owned","obese","oxide","organ","parka","paste","phony","polka","pygmy","quota","quilt","quiet","quirk","quake","razor","revue","rowdy","ryder","rabid","salah","scion","serum","siege","suave","tango","thyme","topaz","toxin","twirl","usage","ulcer","union","usher","utile","vague","visor","vodka","vowel","vinyl","waved","widen","wrath","wryly","waltz","xylyl","xerox","xebec","xurel","xylem","young","yeast","yield","yokel","yager","zebra","zoned","zeoid","zooid","zesty"];
                
                // get the boxes that hold the letters
                let row1 = document.getElementById('row1').getElementsByClassName('letter');
                let row2 = document.getElementById('row2').getElementsByClassName('letter');
                let row3 = document.getElementById('row3').getElementsByClassName('letter');
                let row4 = document.getElementById('row4').getElementsByClassName('letter');
                let row5 = document.getElementById('row5').getElementsByClassName('letter');
                let rows = [row1, row2, row3, row4, row5];
                
                let randomLetter = words[Math.floor(Math.random() * words.length)];
                console.log(randomLetter);

                // prevent the user from entering more than 5 characters at a time
                let index = 0;
                let rowIndex = 0;

                document.body.addEventListener('keypress', function getInput(key) {
                    let row = rows[rowIndex];
                    // check if the input is a valid character
                    if (((key.charCode > 64 && key.charCode < 91) || (key.charCode > 96 && key.charCode < 123)) && index < row.length) {
                        // set the current square's text to the inputted character
                        row[index].innerHTML = key.key.toUpperCase();
                        index += 1;
                    }
                    // delete
                    else if (key.charCode == 8 && index > 0) {
                        // if the user enters a backspace, go to the previous square and remove the character in it
                        index -= 1;
                        row[index].innerHTML = "";
                    }
                    // check row when filled in
                    else if (key.charCode == 13 && index == 5) {
                        rowIndex += 1;
                        index = 0;
                        if (rowIndex == 5 || checkValid(row)) {
                            document.body.removeEventListener('keypress', getInput);
                        }
                    }
                })

                function checkValid(letters) {
                    let correctCount = 0;
                    for (let i = 0; i < letters.length; i++) {
                        letters[i].style.backgroundColor = 'rgba(91, 90, 92, 0.75)'; // set box color to gray to start
                        if (letters[i].innerHTML == randomLetter[i].toUpperCase()) {
                            letters[i].style.backgroundColor = 'rgba(69, 41, 113, 0.75)'; // set box to purple when in correct spot
                            correctCount += 1;
                        }
                        else {
                            for (let j = 0; j < randomLetter.length; j++) {
                                if (letters[i].innerHTML == randomLetter[j].toUpperCase() && i != j) {
                                    letters[i].style.backgroundColor = 'rgba(241, 181, 14, 0.5)'; // set box to yellow when in word but not right spot
                                }
                            }
                        }
                        letters[i].style.color = 'white';
                    }
                    
                    return correctCount == 5 ? true : false; // return if all letters are correct or not
                }
            </script>

            <script>
                function showRows () {
                    let container = document.getElementsByClassName('words-container')[0];
                    let buttonContainer = document.getElementsByClassName('difficulty-container')[0];
                    container.style.maxHeight = container.scrollHeight + "px";
                    buttonContainer.style.maxHeight = '0px';
                }
            </script>
        </div>
    </main>
    <footer></footer>
</body>
</html>